<template>
    <div class="slds-m-around_medium">
            
        
        <div class="dynamic-container">
            
            <template for:each={components} for:item="component" for:index="index">
                
                <lightning-layout key={component.id}>
                    <lightning-layout-item size="6">
                        <lightning-combobox  
                            data-index={index}
                            placeholder="Select an option"
                            options={csvHeaderOptions}
                            value={component.csvHeaderValue}
                            onchange={handleCsvHeaderChange}>
                        </lightning-combobox>    
                    </lightning-layout-item>
                    <lightning-layout-item size="6">
                        <div class="slds-grid slds-grid_align-end slds-m-top_x-small" style="max-width: 80%; margin-right: 2rem;">
                            <lightning-button label="Delete Mapping" data-index={index} onclick={DeleteComponent}></lightning-button>
                        </div>
                    </lightning-layout-item>
                </lightning-layout>
                    
                
                <template if:true={component.csvHeaderValue}>
                    <c-csv-header-dropdown
                        key={component.keyValue}
                        header={component.csvHeaderValue}
                        component-name={component.keyValue}
                        options={fieldOptions}
                        lookup-field-list={lookupFieldList}
                        selected-object={selectedObject}
                        is-additional-mapping="true"
                        onhandlelookupselection={handleFieldChange}
                        csv-header-options={csvHeaderOptions}
                    >
                    </c-csv-header-dropdown>
                </template>
            </template>
        </div>

        <lightning-button label="Additional Mapping" onclick={handleAddComponents}></lightning-button>
    
</div>
</template>